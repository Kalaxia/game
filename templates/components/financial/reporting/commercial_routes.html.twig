{% apply spaceless %}
	<twig:LayoutBox>
		<header class="flex items-start justify-between">
			<div>
				<twig:H2>Commerce</twig:H2>
				<twig:H5>Revenus des routes commerciales par planète</twig:H5>
			</div>

			<twig:Tooltip>
				La colonne « Commerce » est un compte rendu de la totalité des revenus de vos routes commerciales. Pour gérer les
				recettes de vos routes commerciales, il vous est nécessaire de vous rendre sur votre plateforme commerciale afin de créer ou supprimer
				des routes.
			</twig:Tooltip>
		</header>

		<section class="mt-4">
			<ul class="list-type-1">
				{% for base in player_bases %}
					{% set base_data = bases_data[base.id.toRfc4122()] %}

					<li>
						{% if base_data['routes_count'] > 0 %}
							<span class="buttons">
								<a href="#" class="sh" data-target="rc-base-{{ base.id }}">↓</a>
							</span>
						{% endif %}
						<span class="label">{{ base.name }} [{{ base_data['routes_count'] }} route{{ base_data['routes_count']|plural }}]</span>
						<span class="value">
							{{- base_data['routes_income'] -}}
							{% if base_data['routes_income_bonus'] > 0 %}
								<span class="bonus">+{{ base_data['routes_income_bonus']|number }}</span>
							{% endif %}
							<img class="icon-color" src="{{ asset('build/media/resources/credit.png') }}" alt="crédits" />
						</span>

						{% if base_data['routes_count'] > 0 %}
							<ul class="sub-list-type-1" id="rc-base-{{ base.id }}">
								{% for route in base_data['routes'] %}
									{% if route.isActive %}
										<li>
											<span class="label">
												{{- route.originBase.name == base.name ? route.destinationBase.name : route.originBase.name -}}
											</span>
											<span class="value">
												{{- route.income|number -}}
											</span>
										</li>
									{% endif %}
								{% endfor %}
							</ul>
						{% endif %}
					</li>
				{% endfor %}

				<li class="strong">
					<span class="label">total des routes commerciales</span>
					<span class="value">
						{{- investments_data.totalRouteIncome|number -}}
						{% if investments_data.totalRouteIncomeBonus > 0 %}
							<span class="bonus">+{{- investments_data.totalRouteIncomeBonus|number -}}</span>
						{% endif %}
						<img class="icon-color" src="{{ asset('build/media/resources/credit.png') }}" alt="crédits" />
					</span>
				</li>
			</ul>
		</section>
	</twig:LayoutBox>
{% endapply %}
