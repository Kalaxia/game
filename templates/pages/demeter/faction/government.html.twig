{% extends 'layouts/demeter/faction.html.twig' %}

{% block content %}
	{{ include('components/faction/government/nav.html.twig') }}

	{% set mode = app.request.query.get('mode', 'law') %}

	{% if 'law' == mode %}
		{% set laws_count = 0 %}

		{#  @TODO Implement more proper way to loop though the laws #}
		{% for i in 1..total_laws_count %}
			{% if get_law_info(i, 'department') == current_player.status and get_law_info(i, 'isImplemented') %}
				{% set laws_count = laws_count + 1 %}
				{{ include('molecules/faction/government/law.html.twig', {'law_id': i}) }}
			{% endif %}
		{% endfor %}

		{% if laws_count < 2 %}
			{% for i in laws_count..1 %}
				{{ include('molecules/common/default.html.twig') }}
			{% endfor %}
		{% endif %}
	{% elseif 'news' == mode %}
		{{ include('components/faction/news/list.html.twig') }}

		{% if faction_news_to_edit is not null %}
			{{ include('components/faction/news/edit.html.twig', { faction_news_to_edit }) }}
		{% else %}
			{{ include('components/faction/news/create.html.twig') }}
		{% endif %}
	{% elseif 'message' == mode %}
		{{ include('components/faction/government/message.html.twig') }}
	{% elseif 'description' == mode %}
		{{ include('components/faction/government/description.html.twig') }}
	{% elseif 'credit' == mode %}
		{{ include('components/faction/government/credit.html.twig') }}
	{% elseif 'manage' == mode %}
		{{ include('components/faction/government/manage/main.html.twig') }}
		{{ include('molecules/common/default.html.twig') }}
	{% endif %}
{% endblock content %}
